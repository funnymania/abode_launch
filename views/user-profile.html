<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>User Profile</title>
		<meta name="description" content="Login Test">
		<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
		<link rel="icon" href="http://funnymania.lol/favicon.ico">
		<link rel="stylesheet" href="global.css">
		<style>
			html {
				height: 100%;
			}
			#splash {
				width: 100%;
				height: 100%;
			}
			body {
				margin: 0px;	
			}
		</style>
	</head>
	<body>
		<div>
			<img id="pfp">
			<div id="name-display"></div>
			<div id="id-display"></div>
		</div>
		<div>
			<a href="/edit-profile">edit</a>
		</div>
		<script>
			let u = document.getElementById('name-display');
			let pfp = document.getElementById('pfp');
			let id = document.getElementById('id-display');

			let dynamicId = 'bcb7787f-8fe3-4435-8daa-a5e4002bb9fb';

			function getIdentityById() {
				// Form post request
				let req = {
					credentials: 'include',
					method: 'GET',
				}

				// request, display response
				fetch('/v1/identity/' + dynamicId, req)
					.then(res => res.json())
					.then(res => {
						if (res.error === undefined) {
							u.innerHTML = res.identity.name;
							id.innerHTML = res.identity.id;
							pfp.src = res.identity.pfp;
						} else {
							console.log('Could not load page');
						}
					});
			}

			getIdentityById();
		</script>
	</body>
</html>
